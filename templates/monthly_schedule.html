{# templates/monthly_schedule.html #}
{% extends "base.html" %}
{% block title %}Monthly Schedule ‚Äî NewTon{% endblock %}

{% block head_extra %}
  {# DEV ONLY: Tailwind CDN. Remove in production and include compiled tailwind CSS instead. #}
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/css/schedule.css">
{% endblock %}

{% block content %}
  <div class="page-wrap">
    <!-- Header -->
    <header class="header-pad">
      <div class="flex items-start md:items-center gap-4 flex-col md:flex-row">
        <div class="flex-1">
          <h1 class="text-3xl md:text-4xl font-bold tracking-tight">üìÖ Monthly Goals Timeline</h1>
          <p class="text-dim mt-2">
            Auto-highlighted for <span id="currentMonthLabel" class="font-semibold text-emerald-300">current month</span>.
          </p>
        </div>
        <div class="flex gap-2">
          <button id="refreshBtn" class="btn">Refresh</button>
        </div>
      </div>
    </header>

    <!-- Filters -->
    <section class="sticky-filters section-pad">
      <div class="glass p-4 md:p-5">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4 items-center">
          <!-- Goal -->
          <div class="flex gap-3 items-center">
            <label class="text-sm text-subtle shrink-0">Goal</label>
            <select id="goalFilter" class="select"></select>
          </div>
          <!-- Month -->
          <div class="flex gap-3 items-center">
            <label class="text-sm text-subtle shrink-0">Month</label>
            <select id="monthFilter" class="select"></select>
          </div>
          <!-- Search -->
          <div class="flex items-center gap-3">
            <input id="searchBox" placeholder="Search tasks‚Ä¶" class="input" />
            <button id="clearSearch" class="btn text-xs hidden">Clear</button>
          </div>
        </div>

        <!-- Legend -->
        <div id="legend" class="mt-3 flex flex-wrap gap-2 text-xs"></div>
      </div>
    </section>

    <!-- Summary -->
    <section class="section-pad">
      <div id="summaryStrip" class="glass p-4 md:p-5 text-sm flex flex-wrap gap-3"></div>
    </section>

    <!-- Timeline -->
    <main class="section-pad">
      <div id="timeline" class="timeline space-y-4 md:space-y-4"></div>

      <!-- Empty state -->
      <div id="emptyState" class="hidden glass p-6 text-center">
        <p class="text-lg mb-1">No matching tasks.</p>
        <p class="text-subtle text-sm">Try clearing the search or selecting a different month/goal.</p>
      </div>
    </main>

    <footer class="py-6 text-sm text-subtle">
      NewTon ‚Äî AI Powered Scheduler. Built with ‚ù§Ô∏è using Flask & TailwindCSS.
    </footer>

    
  </div>
{% endblock %}

{% block body_extra %}
  <script>
    /* Items from Flask; schedule.js reads window.ITEMS */
    window.ITEMS = {{ items|tojson|safe if items is defined else '[]' }};
  </script>
  <script src="/static/js/schedule.js"></script>
{% endblock %}
